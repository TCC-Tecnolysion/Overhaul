@model List<overhaul_teste.Models.TestDrive>

@{
    ViewData["Title"] = "Test Drives Agendados";
}

<h2>Test Drives Agendados</h2>

<table class="table">
    <thead>
        <tr>
            <th>Id</th>
            <th>Cliente</th>
            <th>CPF/CNPJ</th>
            <th>Modelo</th>
            <th>Marca</th>
            <th>Ano</th>
            <th>Data do Test Drive</th>
            <th>Status</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var testDrive in Model)
        {
            <tr>
                <td>@testDrive.IdTest</td>
                <td>@testDrive.ClienteNome</td>
                <td>@testDrive.ClienteCpf</td>
                <td>@testDrive.ModeloCarro</td>
                <td>@testDrive.MarcaCarro</td>
                <td>@testDrive.AnoCarro</td>
                <td>@testDrive.DataTest.ToString("dd/MM/yyyy HH:mm")</td>
                <td>@testDrive.StatusTest</td>
                <td>
                    <!-- concluido -->
                    <form asp-action="ConcluirTestDrive" method="post" style="display:inline;">
                        <input type="hidden" name="idTest" value="@testDrive.IdTest" />
                        <button type="submit" class="btn btn-success" 
                            @if (testDrive.StatusTest == "concluido" || testDrive.StatusTest == "cancelado") { <text>disabled</text> }>
                            Concluir
                        </button>
                    </form>

                    <!-- cancelar -->
                    <form asp-action="CancelarTestDrive" method="post" style="display:inline;">
                        <input type="hidden" name="idTest" value="@testDrive.IdTest" />
                        <button type="submit" class="btn btn-danger" 
                            @if (testDrive.StatusTest == "cancelado" || testDrive.StatusTest == "concluido") { <text>disabled</text> }>
                            Cancelar
                        </button>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>
